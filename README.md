# ARES
 ARES
Kalman filter:
In statistics and control theory, Kalman filtering, also known as linear quadratic estimation(LQE), is an algorithm that uses a series of measurements observed over time.
The algorithm works in a two-step process. In the prediction step, the Kalman filter produces estimates of the current state variables, along with their uncertainties. Once the outcome of the next measurement (necessarily corrupted with some amount of error, including random noise) is observed, these estimates are updated using a weighted average, with more weight being given to estimates with higher certainty. The algorithm is recursive. It can run in real time, using only the present input measurements and the previously calculated state and its uncertainty matrix; no additional past information is required.
Extended Kalman filter: 
In the extended Kalman filter (EKF), the state transition and observation models need not be linear functions of the state but may instead be non-linear functions. 
The function f can be used to compute the predicted state from the previous estimate and similarly the function h can be used to compute the predicted measurement from the predicted state. However, f and h cannot be applied to the covariance directly. Instead a matrix of partial derivatives (the Jacobian) is computed.
At each time step the Jacobian is evaluated with current predicted states. These matrices can be used in the Kalman filter equations. This process essentially linearizes the non-linear function around the current estimate.

Inertial measurement unit:
An inertial measurement unit (IMU) is an electronic device that measures and reports a body's specific force, angular rate, and sometimes the magnetic field surroundings the body, using a combination of accelerometers and gyroscopes, sometimes also magnetometers.
An inertial measurement unit works by detecting linear acceleration using one or more accelerometers and rotational rate using one or more gyroscopes. Some also include a magnetometer which is commonly used as a heading reference. 
 An accelerometer is a device that measures proper acceleration. Proper acceleration, being           the acceleration (or rate of change of velocity) of a body in its own instantaneous rest frame, is not the same as coordinate acceleration, being the acceleration in a fixed coordinate system.
A gyroscope is a device used for measuring or maintaining orientation and angular velocity.
A magnetometer is a device that measures magnetism—the direction, strength, or relative change of a magnetic field at a particular location. 

Output of IMU and GPS module is given to extended Kalman filter. We get  parameters  of  localization of rover from IMU and GPS module. Low update rate of GPS is compensated by IMU.
Through this we get global state of rover like velocity and coordinates. These are given to local::global_map_representation().    
local::global_map_representation()  get local parameters from  local::local_ map _optimization().
Local and global states together represent rovers position on global map. Its output is rover state and dynamic constraints.
Stereo visual odometry:
In stereo visual odometry following things are done:
1.	Rectification: This step is performed so as to ease up the problem of disparity map computation. After this step, all the epipolar lines become parallel to the horizontal, and the disparity. computation step needs to perform its search for matching blocks only in one direction.

2.	feature extraction: Detect local features in each image.

3.	Stereo feature matching: Match features between left/right images.

4.	Temporal feature matching: Temporally match features between frame t and t-1.

5.	RANSAC: Want to recover the incremental camera pose using the tracked features and triangulated landmarks • There will be some erroneous stereo and temporal feature associations - Use RANSAC

         IMPROVEMENT:
 6.     Robust Stereo Visual Odometry Using Improved RANSAC-Based Methods for Mobile Robot Localization
 This   method makes improvements in RANSAC in three aspects: first, the hypotheses are preferentially generated by sampling the input feature points on the order of ages and similarities of the features; second, the evaluation of hypotheses is performed based on the SPRT (Sequential Probability Ratio Test) that makes bad hypotheses discarded very fast without verifying all the data points; third, we aggregate the three best hypotheses to get the final estimation instead of only selecting the best hypothesis. The first two aspects improve the speed of RANSAC by generating good hypotheses and discarding bad hypotheses in advance, respectively. The last aspect improves the accuracy of motion estimation. 
 
 Stereo Visual Odometry yields more than just a camera trajectory.
• Tracked landmarks form a sparse 3D point cloud of the environment  and Can be used as the basis for localization(as used in obstacle detection).
Output of SVO is given to local::local_ map _optimization().  Visual odometry gives local state of rover.

Obstacle detection:
Motivation Obstacle avoidance using stereo vision Points with Z > 0 

The pitch angle between the cameras and the road surface will change. Therefore, we need to compute the pitch angle and disparity of ground pixels dynamically due to static and dynamic fact or sthus the disparity of ground pixels is changing from time to time.

V-Disparity image Disparity map IΔ has been computed IvΔ is built by
accumulating the pixels of same disparity in IΔ along the v axis .Recently, V-disparity image has become popular for ground plane estimation .In this image, the abscissa axis (w) plots the offset for which the correlation has been computed; the ordinates axis (v) plots the image row number; the intensity value is settled proportional to the measured correlation, or the number of pixels having the corresponding disparity (w) in a certain row (v). Each planar surface in the field of view is mapped in a segment in the V-disparity image . Vertical surfaces in the 3Dworld are mapped into vertical line segments, while ground plane in the 3D world are mapped into slanted line segment. This line segment, called ground correlation line in this study, contains the information about the cameras pitch angle at the time of acquisition .

 Hough Transform Labayrade uses Hough transform to extract the ground correlation line
free space on the road Once the longitudinal profile of the road has been extracted , the disparity values on the road surface are known for each scanning line (it is exactly the disparity value corresponding to the longitudinal profile curve extracted for the scanning line in question). Let Δi denote this value .Thus, it is straightforward to extract the obstacles from the disparity map IΔ already computed: for a given scanning line, pixels whose disparity is equal to Δi are located on the road surface; other pixels belong to potential obstacles The part of the image corresponding to the free space area can be used, for example, for extracting the lane-markings in more suitable conditions.

Robust ground correlation extraction:
The behavior of the ground correlation line during a pitch variation is to oscillate, parallel to itself. Experimentally , we found out that the cameras height variation due to oscillation has neglectable effects. Accumulating the V disparity image values along each of the candidate lines, it is possible to estimate the ground correlation line (choosing the line that accumulated the greatest value), and then the pitch of the cameras at the time of acquisition.

GLOBAL CORRELATION METHOD:
 Fast and Robust method (even in lack of distinct features).Exploiting this characteristic By accumulating the matching cost (intensity of V-disparity) along each of the candidate lines and choose the one with least (most) accumulated matching cost as ground correlation line.
 
 Results Applying the method on the same images
Calculate the matching cost(associated with each candidate ground correlation lines)matching costs associated with candidate lines Same as Hough transform The matching cost of each candidate line is accumulated from the bottom of the image to the level Of horizon 

Conclusion  This accuracy is dependant of the image quality and whether or not the ground pixel dominate this area of the image .It seems an appropriate method for detecting obstacles such as vehicles in road in night using structured light (as the headlight of automobile).

Motion planner :
takes the information about heading direction and speed of rover from local::global_map_representation() , obstacles in path from obstacle detector and then plan motion of rover accordingly. It finds shortest path avoiding obstacles considering over constraints. Accordingly it generates command.




by Shorya Gupta



 

